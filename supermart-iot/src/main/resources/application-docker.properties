# ═══════════════════════════════════════════════════════════════════════════════
# Spring Profile: docker
# Activated via SPRING_PROFILES_ACTIVE=docker (set in docker-compose.yml)
# Overrides application.properties for the containerised environment.
# ═══════════════════════════════════════════════════════════════════════════════

# ─── DataSource (MySQL container) ─────────────────────────────────────────────
# 'mysql' resolves to the MySQL service hostname inside the Compose network.
# Connection URL, user and password are also injected as env vars in
# docker-compose.yml (SPRING_DATASOURCE_URL / USERNAME / PASSWORD), so these
# property values act as fallbacks if env vars are absent.
spring.datasource.url=jdbc:mysql://mysql:3306/supermartdb?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=supermart
spring.datasource.password=supermart_pass

# ─── JPA / Hibernate ──────────────────────────────────────────────────────────
# ddl-auto=none  →  Hibernate does NOT touch the schema.
# db/init/01_schema.sql (run by MySQL Docker) owns the schema definition.
# Note: spring.jpa.database-platform is intentionally omitted — Hibernate 6
# auto-detects MySQLDialect from the JDBC URL (explicit setting causes HHH90000025 WARN).
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

# ─── Disable H2 console ───────────────────────────────────────────────────────
# Not needed when running with MySQL.
spring.h2.console.enabled=false

# ─── SQL initialisation ───────────────────────────────────────────────────────
# Spring Boot's built-in SQL init (schema.sql / data.sql classpath files) is
# disabled here – MySQL Docker handles initialisation via docker-entrypoint-initdb.d.
spring.sql.init.mode=never

# ─── Dev-tools ────────────────────────────────────────────────────────────────
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# ─── Actuator ─────────────────────────────────────────────────────────────────
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# ─── Logging ──────────────────────────────────────────────────────────────────
# Values can be overridden at runtime via env vars in docker-compose.yml
# e.g. LOGGING_LEVEL_COM_SUPERMART=INFO
logging.level.com.supermart=DEBUG
logging.level.org.springframework.security=INFO
